<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Beauty Bloom</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .checkout-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 2rem;
        }

        .checkout-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 4px 20px var(--shadow-color);
        }

        .order-summary {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 4px 20px var(--shadow-color);
            position: sticky;
            top: 2rem;
        }

        .payment-methods {
            display: grid;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .payment-option {
            background: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-option:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }

        .payment-option.active {
            border-color: var(--primary-color);
            background: rgba(255, 105, 180, 0.1);
        }

        .payment-option i {
            font-size: 2rem;
            color: var(--primary-color);
        }

        .payment-option h3 {
            margin: 1rem 0;
            color: var(--text-color);
        }

        .payment-option p {
            color: var(--text-light);
        }

        .checkout-form {
            display: none;
            margin-top: 2rem;
        }

        .checkout-form.active {
            display: block;
        }

        .checkout-form h3 {
            margin-bottom: 1.5rem;
            color: var(--primary-color);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--border-color);
            border-radius: 5px;
        }

        .checkout-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary-color);
            color: var(--accent-color);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            background: #ff1493;
            transform: translateY(-2px);
        }

        .order-summary h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .order-total {
            border-top: 2px solid var(--primary-color);
            padding-top: 1rem;
            margin-top: 1rem;
        }

        .order-total h3 {
            color: var(--text-color);
        }

        .order-total .total-price {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <div class="top-nav">
        <a href="index.html" class="logo">
            <div class="logo-icon">
                <i class="fas fa-flower"></i>
            </div>
            Beauty Bloom
        </a>
        <div class="nav-links">
            <a href="index.html">
                <i class="fas fa-home"></i>
                Home
            </a>
            <a href="shop.html">
                <i class="fas fa-shopping-bag"></i>
                Shop
            </a>
            <a href="about.html">
                <i class="fas fa-info-circle"></i>
                About
            </a>
            <a href="contact.html">
                <i class="fas fa-envelope"></i>
                Contact
            </a>
            <a href="login.html">
                <i class="fas fa-sign-in-alt"></i>
                Login
            </a>
            <a href="cart.html">
                <i class="fas fa-shopping-cart"></i>
                Cart
            </a>
        </div>
    </div>

    <div class="checkout-container">
        <!-- Checkout Form Section -->
        <div class="checkout-section">
            <h1>Checkout</h1>
            
            <!-- Payment Methods -->
            <div class="payment-methods">
                <div class="payment-option" onclick="selectPaymentMethod('mpesa')">
                    <i class="fas fa-mobile-alt"></i>
                    <h3>M-Pesa Payment</h3>
                    <p>Pay using M-Pesa</p>
                </div>
                
                <div class="payment-option" onclick="selectPaymentMethod('card')">
                    <i class="fas fa-credit-card"></i>
                    <h3>Credit/Debit Card</h3>
                    <p>Pay with your card</p>
                </div>
                
                <div class="payment-option" onclick="selectPaymentMethod('cash')">
                    <i class="fas fa-money-bill-wave"></i>
                    <h3>Pay on Delivery</h3>
                    <p>Pay when you receive your order</p>
                </div>
            </div>

            <!-- Payment Forms -->
            <div id="mpesaForm" class="checkout-form">
                <h3>M-Pesa Payment</h3>
                <form onsubmit="return processMpesaPayment()">
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" required placeholder="Enter your phone number">
                    </div>
                    <div class="form-group">
                        <label for="amount">Amount</label>
                        <input type="number" id="amount" required readonly>
                    </div>
                    <button type="submit" class="checkout-btn">Pay with M-Pesa</button>
                </form>
            </div>

            <div id="cardForm" class="checkout-form">
                <h3>Credit/Debit Card Payment</h3>
                <form onsubmit="return processCardPayment()">
                    <div class="form-group">
                        <label for="cardNumber">Card Number</label>
                        <input type="text" id="cardNumber" required placeholder="1234 5678 9012 3456">
                    </div>
                    <div class="form-group">
                        <label for="expiry">Expiry Date</label>
                        <input type="text" id="expiry" required placeholder="MM/YY">
                    </div>
                    <div class="form-group">
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" required placeholder="123">
                    </div>
                    <button type="submit" class="checkout-btn">Pay with Card</button>
                </form>
            </div>

            <div id="cashForm" class="checkout-form">
                <h3>Pay on Delivery</h3>
                <form onsubmit="return processCashPayment()">
                    <div class="form-group">
                        <label for="address">Delivery Address</label>
                        <input type="text" id="address" required placeholder="Enter your delivery address">
                    </div>
                    <div class="form-group">
                        <label for="contact">Contact Number</label>
                        <input type="tel" id="contact" required placeholder="Enter contact number">
                    </div>
                    <button type="submit" class="checkout-btn">Confirm Order</button>
                </form>
            </div>
        </div>

        <!-- Order Summary -->
        <div class="order-summary">
            <h2>Order Summary</h2>
            <div id="orderItems"></div>
            <div class="order-total">
                <h3>Total Amount:</h3>
                <div class="total-price" id="totalAmount"></div>
            </div>
        </div>
    </div>

    <script>
        // Load cart items
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        let totalAmount = 0;

        // Display cart items in order summary
        function updateOrderSummary() {
            const orderItems = document.getElementById('orderItems');
            orderItems.innerHTML = '';
            
            cart.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'order-item';
                itemElement.innerHTML = `
                    <div>
                        <h4>${item.name}</h4>
                        <p>Quantity: ${item.quantity}</p>
                    </div>
                    <div>
                        <p>Price: KES ${item.price}</p>
                    </div>
                `;
                orderItems.appendChild(itemElement);
                
                const itemPrice = parseFloat(item.price.replace('$', ''));
                totalAmount += itemPrice * item.quantity;
            });

            // Update total amount
            document.getElementById('totalAmount').textContent = `KES ${totalAmount.toFixed(2)}`;
            document.getElementById('amount').value = totalAmount.toFixed(2);
        }

        // Payment method selection
        function selectPaymentMethod(method) {
            // Remove active class from all options
            document.querySelectorAll('.payment-option').forEach(option => {
                option.classList.remove('active');
            });

            // Add active class to selected option
            event.currentTarget.classList.add('active');

            // Show appropriate form
            document.querySelectorAll('.checkout-form').forEach(form => {
                form.classList.remove('active');
            });
            document.getElementById(`${method}Form`).classList.add('active');
        }

        // Process M-Pesa payment
        function processMpesaPayment() {
            const phone = document.getElementById('phone').value;
            if (!phone.startsWith('254') && phone.length !== 10) {
                alert('Please enter a valid phone number starting with 254');
                return false;
            }
            
            // Here you would typically make an API call to process the payment
            alert('M-Pesa payment request sent. Please check your phone for the payment request.');
            return false;
        }

        // Process Card payment
        function processCardPayment() {
            // Here you would typically integrate with a payment gateway
            alert('Card payment processing will be implemented with a payment gateway integration.');
            return false;
        }

        // Process Cash on Delivery
        function processCashPayment() {
            const address = document.getElementById('address').value;
            const contact = document.getElementById('contact').value;
            
            if (!address || !contact) {
                alert('Please provide delivery address and contact number');
                return false;
            }
            
            // Here you would typically save the order details
            alert('Order placed successfully! Your items will be delivered to the provided address.');
            return false;
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            updateOrderSummary();
            // Select first payment method by default
            document.querySelector('.payment-option').click();
        });
    </script>
</body>
</html>
